#!/bin/rc
#flag x +
flag e +
if(! test -d /9){
	# If the script fails on unix, assume there is no running
	# instance, start firefox.
	run=window
	lx2 /9$0 $* || $run lx2 firefox $*
	#read
	exit $status
}

pid=`{pgrep -f '/usr/lib/firefox/firefox' | tail -1}
if(~ $pid ''){
    echo $0: no firefox process
    exit 1
}
DISPLAY=`{cat /proc/$pid/environ | tr '\0' '\n' \
	| grep '^DISPLAY=' | sed 's/.*=//'}
#echo DISPLAY: $DISPLAY
exec firefox $*
